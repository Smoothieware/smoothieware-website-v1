
# Temperature Control Options

This page lists all configuration options for the Temperature Control module, which manages heating and cooling for things like hotends and heated beds.

## Configuration Options

| Option | Default Value | Description |
| ------ | :-----------: | ----------- |
| {::nomarkdown}<setting v1="temperature_control.{name}.enable" v2="temperature control.enable"></setting>{:/nomarkdown} | {::nomarkdown}<raw>true</raw>{:/nomarkdown} | Whether to activate this temperaturecontrol module. You can create as many temperaturecontrol modules as you want, simply by giving a new module a name, and setting its {::nomarkdown}<setting v1="temperature_control.{name}.enable" v2="temperature control.enable"></setting>{:/nomarkdown} option to true. |
| {::nomarkdown}<setting v1="temperature_control.{name}.thermistor_pin" v2="temperature control.thermistor_pin"></setting>{:/nomarkdown} | {::nomarkdown}<pin>0.23</pin>{:/nomarkdown} | Pin for the thermistor to read. ADC ports TH1 to TH4 are pins {::nomarkdown}<pin>0.23</pin>{:/nomarkdown} to {::nomarkdown}<pin>0.26</pin>{:/nomarkdown}. |
| {::nomarkdown}<setting v1="temperature_control.{name}.readings_per_second" v2="temperature control.readings_per_second"></setting>{:/nomarkdown} | {::nomarkdown}<raw>20</raw>{:/nomarkdown} | How many times per second to read temperature from the sensor. |
| {::nomarkdown}<setting v1="temperature_control.{name}.pwm_frequency"></setting>{:/nomarkdown} | {::nomarkdown}<raw>2000</raw>{:/nomarkdown} | How many times per second to switch the heating element on or off. Set to a low value (20) if using a Solid State Relay. |
| {::nomarkdown}<setting v1="temperature_control.{name}.heater_pin" v2="temperature control.heater_pin"></setting>{:/nomarkdown} | {::nomarkdown}<pin>2.7</pin>{:/nomarkdown} | Pin that controls the heater. This can be used to control a Mosfet on board or an external Solid State Relay. Set to `nc` if a readonly thermistor is being defined. |
| {::nomarkdown}<setting v1="temperature_control.{name}.thermistor" v2="temperature control.thermistor"></setting>{:/nomarkdown} | {::nomarkdown}<raw>EPCOS100K</raw>{:/nomarkdown} | Set the thermistor model for this module. Several different common models are pre-defined, see [here for a list](temperaturecontrol#toc5). |
| {::nomarkdown}<setting v1="temperature_control.{name}.beta" v2="temperature control.beta"></setting>{:/nomarkdown} | {::nomarkdown}<raw>4066</raw>{:/nomarkdown} | Manually set the {::nomarkdown}<setting v1="temperature_control.{name}.beta" v2="temperature control.beta"></setting>{:/nomarkdown} value for your thermistor. This is useful if your thermistor is not in the common pre-defined models. |
| {::nomarkdown}<setting v1="temperature_control.{name}.r0" v2="temperature control.r0"></setting>{:/nomarkdown} | {::nomarkdown}<raw>100000</raw>{:/nomarkdown} | Manually set the {::nomarkdown}<setting v1="temperature_control.{name}.r0" v2="temperature control.r0"></setting>{:/nomarkdown} resistance value for your thermistor. This is useful if your thermistor is not in the common pre-defined models. Besides {::nomarkdown}<setting v1="temperature_control.{name}.beta" v2="temperature control.beta"></setting>{:/nomarkdown} and {::nomarkdown}<setting v1="temperature_control.{name}.r0" v2="temperature control.r0"></setting>{:/nomarkdown} which are properties of your thermistor, you can also set the `r1`, `r2` and `t0` values, but those are properties of your board so they usually never have to be changed. |
| {::nomarkdown}<setting v1="temperature_control.{name}.get_m_code" v2="temperature control.get_m_code"></setting>{:/nomarkdown} | {::nomarkdown}<raw>105</raw>{:/nomarkdown} | Calling this M-code will return the current temperature. |
| {::nomarkdown}<setting v1="temperature_control.{name}.set_m_code" v2="temperature control.set_m_code"></setting>{:/nomarkdown} | {::nomarkdown}<raw>104</raw>{:/nomarkdown} | This is the M-code for simply setting the temperature. For example here, the value is <code>104</code> so you use {::nomarkdown}<mcode>M104</mcode>{:/nomarkdown} S50 to set this module's heater's temperature to 50. |
| {::nomarkdown}<setting v1="temperature_control.{name}.set_and_wait_m_code" v2="temperature control.set_and_wait_m_code"></setting>{:/nomarkdown} | {::nomarkdown}<raw>109</raw>{:/nomarkdown} | This is the M-code for setting the temperature then waiting for that temperature to be reached before doing anything. For example here, the value is <code>109</code> so you use {::nomarkdown}<mcode>M109</mcode>{:/nomarkdown} S50 to set this module's heater's temperature to 50 and then wait. |
| {::nomarkdown}<setting v1="temperature_control.{name}.designator" v2="temperature control.designator"></setting>{:/nomarkdown} | {::nomarkdown}<raw>T</raw>{:/nomarkdown} | The letter this module's temperature will be identified as in the {::nomarkdown}<mcode>M105</mcode>{:/nomarkdown} command's answer. For example here the value is T, so {::nomarkdown}<mcode>M105</mcode>{:/nomarkdown} will answer <code>ok T:23.4 /0.0 @0</code>. |
| {::nomarkdown}<setting v1="temperature_control.{name}.p_factor" v2="temperature control.p_factor"></setting>{:/nomarkdown} | {::nomarkdown}<raw>13.7</raw>{:/nomarkdown} | P factor for PID temperature regulation. |
| {::nomarkdown}<setting v1="temperature_control.{name}.i_factor" v2="temperature control.i_factor"></setting>{:/nomarkdown} | {::nomarkdown}<raw>0.097</raw>{:/nomarkdown} | I factor for PID temperature regulation. |
| {::nomarkdown}<setting v1="temperature_control.{name}.d_factor" v2="temperature control.d_factor"></setting>{:/nomarkdown} | {::nomarkdown}<raw>24</raw>{:/nomarkdown} | D factor for PID temperature regulation. |
| {::nomarkdown}<setting v1="temperature_control.{name}.max_pwm" v2="temperature control.max_pwm"></setting>{:/nomarkdown} | {::nomarkdown}<raw>64</raw>{:/nomarkdown} | Maximum PWM value for the heating element. This can be from `0` to `255`. `64` is a good value if driving a 12v resistor with 24v. `255` is the default and the normal value if you are using the right voltage for your heating element. |
| {::nomarkdown}<setting v1="temperature_control.{name}.bang_bang" v2="temperature control.bang_bang"></setting>{:/nomarkdown} | {::nomarkdown}<raw>false</raw>{:/nomarkdown} | Set to true to use bang bang control rather than PID. |
| {::nomarkdown}<setting v1="temperature_control.{name}.hysteresis" v2="temperature control.hysteresis"></setting>{:/nomarkdown} | {::nomarkdown}<raw>2.0</raw>{:/nomarkdown} | Set to the temperature in degrees C to use as hysteresis for bang bang control. |
| {::nomarkdown}<setting v1="temperature_control.{name}.i_max" v2="temperature control.i_max"></setting>{:/nomarkdown} | {::nomarkdown}<raw>64</raw>{:/nomarkdown} | Maximum value for the I variable in the PID control. This should usually be set to about the same value as {::nomarkdown}<setting v1="temperature_control.{name}.max_pwm" v2="temperature control.max_pwm"></setting>{:/nomarkdown} (as a rule of thumb, it is not actually a pwm setting). This helps with preventing overshoot when initially heating up. If you get a strong (>10Â°C) overshoot on startup, try setting this to a value lower than {::nomarkdown}<setting v1="temperature_control.{name}.max_pwm" v2="temperature control.max_pwm"></setting>{:/nomarkdown}. |
| {::nomarkdown}<setting v1="temperature_control.{name}.sensor" v2="temperature control.sensor"></setting>{:/nomarkdown} | {::nomarkdown}<raw>thermistor</raw>{:/nomarkdown} | Set the type of sensor used to read temperature. Values can be `thermistor` for the usual thermistor reading via ADC method, or `max31855` to read values from a thermocouple over SPI. See [Reading a thermocouple](temperaturecontrol#thermocouple). |
| {::nomarkdown}<setting v1="temperature_control.{name}.chip_select_pin" v2="temperature control.spi_select_pin"></setting>{:/nomarkdown} | {::nomarkdown}<pin>0.16</pin>{:/nomarkdown} | If the sensor is set to `max31855`, sets the chip select pin for the SPI port. This allows you to have multiple sensors sharing the same SPI port, as long as they each get a chip select (CS) pin. |
| {::nomarkdown}<setting v1="temperature_control.{name}.spi_channel" v2="temperature control.spi_channel"></setting>{:/nomarkdown} | {::nomarkdown}<raw>0</raw>{:/nomarkdown} | If the sensor is set to `max31855`, SPI channel using which to talk to the thermocouple chip. |
| {::nomarkdown}<setting v1="temperature_control.{name}.ad8495_pin"></setting>{:/nomarkdown} | {::nomarkdown}<raw>-</raw>{:/nomarkdown} | Required ADC pin for reading AD8495 thermocouple amplifier output. Only used when sensor type is `ad8495`. |
| {::nomarkdown}<setting v1="temperature_control.{name}.ad8495_offset"></setting>{:/nomarkdown} | {::nomarkdown}<raw>0</raw>{:/nomarkdown} | Temperature offset in degrees Celsius for AD8495 sensor calibration. Default is 0. Adafruit AD8495 boards typically require an offset of 250. Only used when sensor type is `ad8495`. |
| {::nomarkdown}<setting v1="temperature_control.{name}.PT1000_pin"></setting>{:/nomarkdown} | {::nomarkdown}<raw>-</raw>{:/nomarkdown} | Required ADC pin for reading PT1000 RTD sensor. Only used when sensor type is `PT1000`. |
| {::nomarkdown}<setting v1="temperature_control.{name}.max_temp" v2="temperature control.max_temp"></setting>{:/nomarkdown} | {::nomarkdown}<raw>100</raw>{:/nomarkdown} | If set, no temperature above this will be accepted and if the temperature exceeds this value the system will be forced into a HALT state. |
| {::nomarkdown}<setting v1="temperature_control.{name}.runaway_heating_timeout" v2="temperature control.runaway_heating_timeout"></setting>{:/nomarkdown} | {::nomarkdown}<raw>120</raw>{:/nomarkdown} | If we take longer than this many seconds to heatup, the system will be forced into a HALT state. Set to 0 to disable it. Default is 900 seconds. |
| {::nomarkdown}<setting v1="temperature_control.{name}.runaway_cooling_timeout" v2="temperature control.runaway_cooling_timeout"></setting>{:/nomarkdown} | {::nomarkdown}<raw>120</raw>{:/nomarkdown} | If we take longer than this many seconds to cooldown, the system will be forced into a HALT state. Set to 0 to disable it. Default is disabled. |
| {::nomarkdown}<setting v1="temperature_control.{name}.runaway_range" v2="temperature control.runaway_range"></setting>{:/nomarkdown} | {::nomarkdown}<raw>20</raw>{:/nomarkdown} | If set to non-zero, and the target temperature is reached, and temperature diverges from the target temperature by more than this, the system will be forced into a HALT state. |
