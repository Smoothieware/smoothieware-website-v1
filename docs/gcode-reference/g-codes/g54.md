---
permalink: /g54
layout: default
title: G54 - Work Coordinate Systems
---

# {::nomarkdown}<gcode>G54</gcode>{:/nomarkdown} - Work Coordinate Systems

{::nomarkdown}
<a href="/images/gcode.png">
  <img src="/images/gcode.png" alt="G-code icon" style="width: 250px; height: 250px; float: right; margin-left: 1rem;"/>
</a>
{:/nomarkdown}

{::nomarkdown}<gcode>G54</gcode>{:/nomarkdown} selects work coordinate system 1. Smoothieware supports nine total work coordinate systems ({::nomarkdown}<gcode>G54</gcode>{:/nomarkdown}-{::nomarkdown}<gcode>G59.3</gcode>{:/nomarkdown}), allowing you to define different coordinate origins for multiple work pieces or machine setups. This is essential for CNC machining workflows and multi-part production runs.

## Overview

Work coordinate systems (WCS) provide a way to set different coordinate origins for different parts or setups. Instead of recalculating coordinates for each part, you can define a WCS for each part (each at its own 0,0,0 point), then switch between them with a single G-code command.

### What Are Work Coordinate Systems?

{::nomarkdown}
<sl-alert variant="primary" open>
  <sl-icon slot="icon" name="info-circle"></sl-icon>
  <strong>Coordinate Transformation:</strong><br>
  Machine coordinates = Work coordinate system offset + Commanded coordinates<br>
  <raw>Machine_Position = WCS_Offset + Commanded_Position</raw>
</sl-alert>
{:/nomarkdown}

## Available Work Coordinate Systems

Smoothieware supports nine work coordinate systems:

| Command | WCS Number | Name | Default |
|---------|-----------|------|---------|
| {::nomarkdown}<gcode>G54</gcode>{:/nomarkdown} | 1 | Work Coordinate System 1 | Yes |
| {::nomarkdown}<gcode>G55</gcode>{:/nomarkdown} | 2 | Work Coordinate System 2 | |
| {::nomarkdown}<gcode>G56</gcode>{:/nomarkdown} | 3 | Work Coordinate System 3 | |
| {::nomarkdown}<gcode>G57</gcode>{:/nomarkdown} | 4 | Work Coordinate System 4 | |
| {::nomarkdown}<gcode>G58</gcode>{:/nomarkdown} | 5 | Work Coordinate System 5 | |
| {::nomarkdown}<gcode>G59</gcode>{:/nomarkdown} | 6 | Work Coordinate System 6 | |
| {::nomarkdown}<gcode>G59.1</gcode>{:/nomarkdown} | 7 | Extended WCS 7 | |
| {::nomarkdown}<gcode>G59.2</gcode>{:/nomarkdown} | 8 | Extended WCS 8 | |
| {::nomarkdown}<gcode>G59.3</gcode>{:/nomarkdown} | 9 | Extended WCS 9 | |

## Syntax

```gcode
G54      ; Select WCS 1
G55      ; Select WCS 2
G59.3    ; Select WCS 9 (extended)
```

## Parameters

Work coordinate system selection has no parameters. The command simply selects which WCS is active for subsequent moves.

## Behavior

- **Modal command**: Once selected, a WCS remains active until a different one is selected
- **Default on power-up**: {::nomarkdown}<gcode>G54</gcode>{:/nomarkdown} is the default active WCS
- **Applies to all axes**: X, Y, Z, and any additional axes use the same WCS offset
- **Persistent**: WCS offsets are stored in configuration and persist across power cycles

## Setting Work Coordinate System Offsets

Use the {::nomarkdown}<gcode>G10</gcode>{:/nomarkdown} command to set WCS offsets:

```gcode
G10 L2 P1 X0 Y0 Z0         ; Set G54 offset to 0,0,0
G10 L2 P1 X10 Y20 Z5       ; Set G54 offset to X=10, Y=20, Z=5
G10 L2 P2 X100 Y0 Z0       ; Set G55 offset to X=100, Y=0, Z=0
G10 L2 P5 X0 Y0 Z-5        ; Set G58 offset to X=0, Y=0, Z=-5
```

The P parameter specifies which WCS to modify (1-9). See the {::nomarkdown}<gcode>G10</gcode>{:/nomarkdown} documentation for detailed offset setting.

## Examples

### Example 1: Two Parts on One Table

```gcode
; Part 1 positioned at machine X=10, Y=20
G10 L2 P1 X10 Y20 Z0      ; Set G54 (WCS 1) to part 1 location
G54                        ; Select G54
G0 X0 Y0 Z0               ; Move to part 1 origin (actually machine 10,20,0)

; Part 2 positioned at machine X=110, Y=20
G10 L2 P2 X110 Y20 Z0     ; Set G55 (WCS 2) to part 2 location
G55                        ; Select G55
G0 X0 Y0 Z0               ; Move to part 2 origin (actually machine 110,20,0)
```

### Example 2: Setting WCS After Probing Bed

```gcode
G28                        ; Home all axes
G0 Z5                      ; Move to probing height
G30                        ; Probe bed and set Z=0
G10 L2 P1 Z0               ; Set G54 Z offset to current position
```

### Example 3: Querying Active WCS

```gcode
$G                         ; Report current modal state (includes active WCS)
```

Output will show which WCS is currently active.

## Related Commands

{::nomarkdown}
<versioned orientation="vertical">
<v1>
{:/nomarkdown}

- {::nomarkdown}<gcode>G10</gcode>{:/nomarkdown} - Set WCS offsets via G10 L2 P[number]
- {::nomarkdown}<gcode>G53</gcode>{:/nomarkdown} - Use machine coordinates (bypass WCS for one move)
- {::nomarkdown}<gcode>G92</gcode>{:/nomarkdown} - Set position offset (adds to WCS offset)
- {::nomarkdown}<mcode>M500</mcode>{:/nomarkdown} - Save WCS offsets to SD card (config-override)
- {::nomarkdown}<mcode>M501</mcode>{:/nomarkdown} - Read WCS offsets from SD card

{::nomarkdown}
</v1>
<v2>
{:/nomarkdown}

- {::nomarkdown}<gcode>G10</gcode>{:/nomarkdown} - Set WCS offsets via G10 L2 P[number]
- {::nomarkdown}<gcode>G53</gcode>{:/nomarkdown} - Use machine coordinates (bypass WCS for one move)
- {::nomarkdown}<gcode>G92</gcode>{:/nomarkdown} - Set position offset (adds to WCS offset)
- {::nomarkdown}<mcode>M500</mcode>{:/nomarkdown} - Save WCS offsets to SD card (config-override)
- {::nomarkdown}<mcode>M501</mcode>{:/nomarkdown} - Read WCS offsets from SD card

{::nomarkdown}
</v2>
</versioned>
{:/nomarkdown}

## Use Cases

**CNC Machining:**
- Multiple parts on one machine bed, each with their own WCS
- Rotating workpieces through multiple operations
- Tool change positions in machine coordinates

**3D Printing:**
- Less common (usually just {::nomarkdown}<gcode>G54</gcode>{:/nomarkdown})
- Can be used for multi-part beds

**Pick and Place Machines:**
- Each feeder position can have its own WCS
- Each board position on the table can have its own WCS

## Important Notes

- **Offset Addition**: {::nomarkdown}<gcode>G92</gcode>{:/nomarkdown} offsets are ADDED to WCS offsets. Both transforms apply.
- **Machine Coordinates**: {::nomarkdown}<gcode>G53</gcode>{:/nomarkdown} bypasses WCS offsets for a single move, useful for absolute positioning.
- **Persistence**: WCS offsets are saved in configuration and restored on boot (with {::nomarkdown}<mcode>M500</mcode>{:/nomarkdown}).
- **Machine Coordinate System**: {::nomarkdown}<gcode>G54</gcode>{:/nomarkdown}-{::nomarkdown}<gcode>G59.3</gcode>{:/nomarkdown} are offsets from the machine coordinate system (MCS) established by homing.

## Video Tutorial

{::nomarkdown}
<div style="text-align: center; margin: 2rem auto;">
  <iframe width="640" height="480" src="https://www.youtube.com/embed/BiuD6li6h8A" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe>
</div>
{:/nomarkdown}

## Resources

For more detailed information about work coordinate systems:

- [LinuxCNC WCS Documentation](http://linuxcnc.org/docs/html/gcode/g-code.html#gcode:g54-g59.3)
- [G10 - Set Offsets](/g10)
- [G53 - Use Machine Coordinates](/g53)
- [G92 - Set Position Offset](/g92)
