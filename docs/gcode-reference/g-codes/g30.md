---
permalink: /g30
---

# {::nomarkdown}<gcode>G30</gcode>{:/nomarkdown} G-code

{::nomarkdown}
<a href="/images/gcode.png">
  <img src="/images/gcode.png" alt="G-code icon" style="width: 250px; height: 250px; float: right; margin-left: 1rem;"/>
</a>
{:/nomarkdown}

{::nomarkdown}<gcode>G30</gcode>{:/nomarkdown} means "move the probe until it hits something in the Z axis".

## On CNC Mills

On CNC mills it can be used to:

- Find where the workpiece is located in the Z dimension
- Find the length of a newly inserted tool
- Find the touch point between a tool and the workpiece

## On 3D Printers

On a 3D printer it can be used to:

- Find the touch point of the bed and actuator
- Calibrate [Delta](delta) machines
- Automatically level beds with unequal heights

To probe in other axes like X and Y, see the {::nomarkdown}<gcode>G38.2</gcode>{:/nomarkdown} and {::nomarkdown}<gcode>G38.3</gcode>{:/nomarkdown} G-codes.

## Format

The command is used as such:

```
G30
```

Which means: move (in the Z axis) until the probe is triggered, then report what distance was traveled.

You can also do:

```
G30 Z10
```

Which means: move (in the Z axis) until the probe is triggered, then set the current Z position to 10 (using {::nomarkdown}<gcode>G92</gcode>{:/nomarkdown} Z10).

This is useful for example if you want to use the probe to measure the distance between something else on the actuator and what is touched, and you know the distance between the probe's height and that thing's height.

It is also possible to specify a speed at which to move with:

```
G30 F100
```

## Parameters

| Parameter | Usage                                      | Example       |
|-----------|--------------------------------------------|---------------|
| `Z`       | Once the probe hits, set the Z position to this value | <gcode>G30</gcode> Z0      |
| `F`       | Move at this speed in millimeters/minute  | <gcode>G30</gcode> Z10 F100|

## Feedrate

The `F` parameter sets the movement speed for this move.

It sets the speed only for this specific move and is not modal.

It temporarily overrides the {::nomarkdown}<setting v1="zprobe.slow_feedrate" v2="zprobe.slow_feedrate"></setting>{:/nomarkdown} [configuration option](configuring-smoothie), see [zprobe](zprobe).

## Configuration

This command is configured via the [Zprobe](zprobe) module's options.

{::nomarkdown}
<versioned orientation="vertical">
<v1>
{:/nomarkdown}

**V1 Zprobe Configuration:**

The basic zprobe settings include:

- {::nomarkdown}<setting v1="zprobe.enable"></setting>{:/nomarkdown} - Enable the probe module
- {::nomarkdown}<setting v1="zprobe.probe_pin"></setting>{:/nomarkdown} - Pin where the probe sensor is connected
- {::nomarkdown}<setting v1="zprobe.slow_feedrate"></setting>{:/nomarkdown} - Probing speed (mm/sec)
- {::nomarkdown}<setting v1="zprobe.fast_feedrate"></setting>{:/nomarkdown} - XY travel speed between probe points
- {::nomarkdown}<setting v1="zprobe.probe_height"></setting>{:/nomarkdown} - Height above bed for rapid XY moves
- {::nomarkdown}<setting v1="zprobe.max_z"></setting>{:/nomarkdown} - Maximum probe travel distance

Example V1 configuration:

```
zprobe.enable                true
zprobe.probe_pin             1.28!^
zprobe.slow_feedrate         5
zprobe.fast_feedrate         100
zprobe.probe_height          5
zprobe.return_feedrate       0
zprobe.max_z                 200
```

{::nomarkdown}
</v1>
<v2>
{:/nomarkdown}

**V2 Zprobe Configuration:**

V2 uses INI-style configuration with additional options for advanced probing behavior:

```ini
[zprobe]
enable                = true
probe_pin             = 1.28!^
slow_feedrate         = 5
fast_feedrate         = 100
probe_height          = 5
return_feedrate       = 0
max_z                 = 200
debounce_ms           = 0
reverse_z             = false
dwell_before_probing  = 0
nist_G30              = false
```

**Key V2 Settings:**

- {::nomarkdown}<setting v2="zprobe.enable"></setting>{:/nomarkdown} - Enable the probe module
- {::nomarkdown}<setting v2="zprobe.probe_pin"></setting>{:/nomarkdown} - Pin where the probe sensor is connected
- {::nomarkdown}<setting v2="zprobe.slow_feedrate"></setting>{:/nomarkdown} - Probing speed (mm/sec)
- {::nomarkdown}<setting v2="zprobe.debounce_ms"></setting>{:/nomarkdown} - Debounce time (NEW) for noisy signals
- {::nomarkdown}<setting v2="zprobe.dwell_before_probing"></setting>{:/nomarkdown} - (NEW) Pause before probing (useful for piezo probes)
- {::nomarkdown}<setting v2="zprobe.reverse_z"></setting>{:/nomarkdown} - (NEW) Probe upward instead of downward
- {::nomarkdown}<setting v2="zprobe.nist_G30"></setting>{:/nomarkdown} - (NEW) Enable NIST-compliant {::nomarkdown}<gcode>G30</gcode>{:/nomarkdown} behavior

{::nomarkdown}
</v2>
</versioned>
{:/nomarkdown}

## Further reading

These resources are used as references for Gcode:
- [LinuxCNC Gcode list](http://linuxcnc.org/docs/html/gcode.html)
- [Reprap Gcode list](http://reprap.org/wiki/G-code)
